<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://XAI-toolkit.github.io/td-classifier/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>TD Classifier - XAI Toolkit</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">XAI Toolkit</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Toolkits <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">CRISSPAC</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../crisspac/" class="dropdown-item">CRISSPAC</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">TD Benchmarker</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../td-benchmarker/" class="dropdown-item">TD Benchmarker</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Forecasting Toolbox</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../forecasting-toolbox/" class="dropdown-item">Forecasting Toolbox</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">TD Classifier</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active">TD Classifier</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">SHAP-Boruta</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../shap-boruta/" class="dropdown-item">SHAP-Boruta</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../forecasting-toolbox/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../shap-boruta/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/XAI-toolkit/td-classifierdocs/*docs/index.md" class="nav-link">Edit on </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#td-classifier" class="nav-link">TD Classifier</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#description" class="nav-link">Description</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installation" class="nav-link">Installation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#run-server" class="nav-link">Run Server</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#next-steps" class="nav-link">Next Steps</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-to-cite" class="nav-link">How to cite?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="td-classifier">TD Classifier</h1>
<h2 id="description">Description</h2>
<p>This repository contains the source code of the <strong>TD Classifier back-end</strong> (<a href="https://youtu.be/umgXU8u7lIA">video</a>, <a href="http://160.40.52.130:3000/tdclassifier">running instance</a>). </p>
<p>TD Classifier is a novel tool that employs Machine Learning (ML) for classifying software classes as High/Not-High TD for any arbitrary Java project, just by pointing to its git repository. It has been developed as part of our recent research work (<a href="https://ieeexplore.ieee.org/document/9622154">Tsoukalas et al., 2021</a>) towards demonstrating the usefulness of the proposed classification framework in practice. As ground truth for the development of the tool's classification framework, we considered a <em>"commonly agreed TD knowledge base"</em> (<a href="https://link.springer.com/article/10.1007/s10664-020-09869-w">Amanatidis et al., 2020</a>), i.e., an empirical benchmark of classes that exhibit high levels of TD, based on the convergence of three widely-adopted TD assessment tools, namely <a href="https://www.sonarqube.org/">SonarQube</a>, <a href="https://www.castsoftware.com/products/code-analysis-tools">CAST</a>, and <a href="https://www.vector.com/no/en/products/products-a-z/software/squore/squore-software-analytics-for-project-monitoring/">Squore</a>. Then, we built a set of independent variables based on a wide range of software metrics spanning from code metrics to repository activity, retrieved by employing four popular open source tools, namely <a href="https://github.com/ishepard/pydriller">PyDriller</a>, <a href="https://github.com/mauricioaniche/ck">CK</a>, <a href="https://pmd.github.io/latest/pmd_userdocs_cpd.html">PMD’s Copy/Paste Detector</a> , and <a href="https://github.com/AlDanial/cloc#quick-start-">cloc</a>. Therefore, the tool subsumes the collective knowledge that would be extracted by combining the results of the three TD assessment tools and relies on four open-source tools to automatically retrieve all independent variables and yield the identified high-TD classes. In that way, it enables identification and further experimentation of high-TD modules, without having to resort to a multitude of commercial and open source tools.</p>
<p><strong>Note</strong>: the source code of the <strong>TD Classifier frontend</strong> is also publicly available as part of the overall SDK4ED Dashboard and can be found <a href="https://gitlab.seis.iti.gr/sdk4ed/sdk4ed-dashboard">here</a>.</p>
<h2 id="installation">Installation</h2>
<h3 id="installation-using-anaconda">Installation using Anaconda</h3>
<p>In this section, we provide instructions on how the user can build the python Flask server of the TD Classifier from scratch, using the Anaconda virtual environment. The TD Classifier is developed to run on Unix and Windows systems with python 3.6.* innstalled. We suggest installing python via the Anaconda distribution as it provides an easy way to create a virtual environment and install dependencies. The configuration steps needed, are described below:</p>
<ul>
<li><strong>Step 1</strong>: Download the latest <a href="https://www.anaconda.com/distribution/">Anaconda distribution</a> and follow the installation steps described in the <a href="https://docs.anaconda.com/anaconda/install/windows/">Anaconda documentation</a>.</li>
<li><strong>Step 2</strong>: Open Anaconda cmd. Running Anaconda cmd activates the base environment. We need to create a specific environment to run TD Classifier backend. Create a new python 3.6.4 environment by running the following command:</li>
</ul>
<pre><code class="language-bash">conda create --name td_classifier python=3.6.4
</code></pre>
<p>This command will result in the creation of a conda environment named <em>td_classifier</em>. In order to activate the new environment, execute the following command:</p>
<pre><code class="language-bash">conda activate td_classifier
</code></pre>
<ul>
<li><strong>Step 3</strong>: Once your newly created environment is active, install the needed libraries by executing the following commands:</li>
</ul>
<pre><code class="language-bash">conda install -c anaconda numpy pandas scikit-learn waitress flask flask-cors requests pymongo
</code></pre>
<pre><code class="language-bash">conda install -c conda-forge gitpython
</code></pre>
<p>and</p>
<pre><code class="language-bash">pip install pydriller
</code></pre>
<ul>
<li><strong>Step 4</strong>: To start the server, use the command promt inside the active environment and execute the commands described in section <strong>Run Server</strong>.</li>
</ul>
<h3 id="installation-using-docker-recommended">Installation using Docker (recommended)</h3>
<p>In this section, we provide instructions on how the user can build a new Docker Image that contains the python Flask app and the Conda environment of the of the TD Classifier. We highly recommend the users to select this way of installing the TD Classifier, as it constitutes the easiest way.</p>
<ul>
<li><strong>Step 1</strong>: Download and install <a href="https://www.docker.com/">Docker</a></li>
<li><strong>Step 2</strong>: Clone the latest TD Classifier version and navigate to the home directory. You should see a <a href="/blob/master/Dockerfile">DockerFile</a> and a <a href="./blob/master/environment.yml">environment.yml</a> file, which contains the Conda environment dependencies. </li>
<li><strong>Step 3</strong>: In the home directory of the TD Classifier, open cmd and execute the following command:</li>
</ul>
<pre><code class="language-bash">sudo docker build -t td_classifier_image .
</code></pre>
<p>This command will result in the creation of a Docker Image named <em>td_classifier_image</em>. In order to create a Docker Container from this image, execute the following command:</p>
<pre><code class="language-bash">sudo docker run -it --name td_classifier_test -p 5005:5005 td_classifier_image
</code></pre>
<p>This command will generate and run a Docker Container named <em>td_classifier_test</em> in interactive session mode, i.e. it will open a command promt inside the Container. 
- <strong>Step 4</strong>: To start the server, use the command promt inside the running Container and execute the commands described in section <strong>Run Server</strong>.</p>
<h3 id="installation-of-the-database">Installation of the Database</h3>
<p>A MongoDB database dedicated to storing the output of the TD Classifier web service allows the tool to quickly retrieve past results upon demand, without having to go through the time-consuming process of re-executing the analysis process. TD Classifier does not require a running database instance to be functional. However, in case you require access to previously produced results, a database dedicated to store the output of the TD Classifier web services might be of help. In that case, MongoDB is a well-suited option for the purposes of the TD Classifier.</p>
<p>To quickly install a MongoDB using Docker, open cmd and execute the following command:</p>
<pre><code class="language-bash">sudo docker run --detach  \
  -p 27017:27017  \
  --name mongodb  \
  --volume /home/&lt;user_name&gt;/Desktop/mongo_data:/data/db  \
  mongo
</code></pre>
<p>This command will generate and run a MongoDB Docker Container named <em>mongodb</em>, which will serve as the TD Classifier's dedicated DB.</p>
<h2 id="run-server">Run Server</h2>
<p>You can run the server in various modes using Python to run the <code>td_classifier_service.py</code> script:</p>
<pre><code>usage: td_classifier_service.py [-h] [-dh DB_HOST] [-dp DB_PORT] [-dn DB_DBNAME]
                                [--debug]
                                HOST PORT SERVER_MODE

positional arguments:
  HOST           Server HOST (e.g. &quot;localhost&quot;)
  PORT           Server PORT (e.g. &quot;5005&quot;)
  SERVER_MODE    builtin, waitress

optional arguments:
  -h, --help     show this help message and exit
  -dh DB_HOST    MongoDB HOST (e.g. &quot;localhost&quot;) (default: localhost)
  -dp DB_PORT    MongoDB PORT (e.g. &quot;27017&quot;) (default: 27017)
  -dn DB_DBNAME  Database NAME (default: td_classifier_service)
  --debug        Run builtin server in debug mode (default: False)
</code></pre>
<p><code>HOST</code>, <code>PORT</code>, and <code>SERVER_MODE</code> arguments are <strong>mandatory</strong>. You can set them according to your needs.</p>
<p><code>DB_HOST</code>, <code>DB_PORT</code>, and <code>DB_DBNAME</code> arguments are <strong>optional</strong> and assume that there is a MongoDB instance running either on a local machine or remotely. In case that there is no such MongoDB instance running, the TD Classifier will still return the results, but they will not be stored anywhere.</p>
<h3 id="run-built-in-flask-server">Run built-in Flask server</h3>
<pre><code>         127.0.0.1:5005
Client &lt;----------------&gt; Flask
</code></pre>
<p>To start the TD Classifier using the built-in <strong>Flask</strong> server, use the command promt inside the active Conda or Container environment and execute the following command: </p>
<pre><code class="language-bash">python td_classifier_service.py 0.0.0.0 5005 builtin --debug
</code></pre>
<p>This command will start the built-in Flask server locally (0.0.0.0) on port 5005.</p>
<p><strong>MongoDB Integration</strong></p>
<p>In case there is a MongoDB instance running, use the command promt inside the active conda or Container environment and execute the following command: </p>
<pre><code class="language-bash">python td_classifier_service.py 0.0.0.0 5005 waitress -dh 160.40.52.130 -dp 27017 -dn td_classifier_service
</code></pre>
<p>This command will start the built-in Flask server locally on port 5005 and store the results on a MongoDB database named "td_classifier_service" running locally on port 27017.</p>
<p><strong>Warning</strong>: The built-in Flask mode is useful for development since it has debugging enabled (e.g. in case of error the client gets a full stack trace). However, it is single-threaded. Do NOT use this mode in production!</p>
<h3 id="run-waitress-server">Run Waitress server</h3>
<pre><code>         127.0.0.1:5005
Client &lt;----------------&gt; Waitress &lt;---&gt; Flask
</code></pre>
<p>To start the TD Classifier using the <strong>Waitress</strong> server, use the command promt inside the active Conda or Container environment and execute the following command:</p>
<pre><code class="language-bash">python td_classifier_service.py 0.0.0.0 5005 waitress
</code></pre>
<p>This command will start the Waitress server locally (0.0.0.0) on port 5005.</p>
<p><strong>MongoDB Integration</strong></p>
<p>In case there is a MongoDB instance running, use the command promt inside the active conda or Container environment and execute the following command: </p>
<pre><code class="language-bash">python td_classifier_service.py 0.0.0.0 5005 waitress -dh 160.40.52.130 -dp 27017 -dn td_classifier_service
</code></pre>
<p>This command will start the Waitress server locally on port 5000 and store the results on a MongoDB database named "td_classifier_service" running locally on port 27017.</p>
<p><strong>Warning</strong>: The Waitress mode is higly recommended in real production environments, since it supports scaling and multiple-request handling features.</p>
<h2 id="next-steps">Next Steps</h2>
<p>Once the server is up and running, you can either exploit the TD Classifier APIs directly via requests, or setup the SDK4ED platform locally (see <a href="https://gitlab.seis.iti.gr/sdk4ed-wiki/wiki-home/wikis/home">here</a>) to benefit from the already implemented and user-friendly TD Classifier frontend.</p>
<h2 id="how-to-cite">How to cite?</h2>
<p>A <a href="https://dl.acm.org/doi/abs/10.1145/3524843.3528094">paper</a> introducing the <strong>TD Classifier</strong> tool has been published in the <em>Proceedings of the International Conference on Technical Debt (TechDebt '22)</em>. To cite this work, please use the following bibtex entry:</p>
<pre><code>@inproceedings{tsoukalas2022td,
  author = {Tsoukalas, Dimitrios and Chatzigeorgiou, Alexander and Ampatzoglou, Apostolos and Mittas, Nikolaos and Kehagias, Dionysios},
  title = {TD Classifier: Automatic Identification of Java Classes with High Technical Debt},
  year = {2022},
  publisher = {Association for Computing Machinery},
  address = {New York, NY, USA},
  doi = {10.1145/3524843.3528094},
  booktitle = {Proceedings of the International Conference on Technical Debt},
  pages = {76–80},
  numpages = {5},
  location = {Pittsburgh, Pennsylvania},
  series = {TechDebt '22}
}
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2023 XAI-toolkit</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
